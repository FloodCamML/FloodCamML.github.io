<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Flood CamML Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Flood CamML Blog Atom Feed"><title data-react-helmet="true">Google Sheets &amp; Drive | Flood CamML</title><meta data-react-helmet="true" property="og:url" content="https://FloodCamML.github.io/docs/tutorial/sheets-and-drive"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Google Sheets &amp; Drive | Flood CamML"><meta data-react-helmet="true" name="description" content="CamML uses Google Sheets to record user labelling responses and Google Drive to save the images being labeled."><meta data-react-helmet="true" property="og:description" content="CamML uses Google Sheets to record user labelling responses and Google Drive to save the images being labeled."><link data-react-helmet="true" rel="shortcut icon" href="/img/docusaurus.png"><link data-react-helmet="true" rel="canonical" href="https://FloodCamML.github.io/docs/tutorial/sheets-and-drive"><link data-react-helmet="true" rel="alternate" href="https://FloodCamML.github.io/docs/tutorial/sheets-and-drive" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://FloodCamML.github.io/docs/tutorial/sheets-and-drive" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.df058e8c.css">
<link rel="preload" href="/assets/js/runtime~main.fa62558d.js" as="script">
<link rel="preload" href="/assets/js/main.c686b041.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo!" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo!" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Flood CamML</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://nc12.floodcamml.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">NC-12 app</a><a href="https://github.com/FloodCamML" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo!" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo!" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Flood CamML</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/about">About</a></li><li class="menu__list-item"><a href="https://nc12.floodcamml.org" target="_blank" rel="noopener noreferrer" class="menu__link">NC-12 app</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/FloodCamML" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/logo.svg" alt="My Site Logo!" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="My Site Logo!" class="themedImage_1VuW themedImage--dark_hz6m"><strong>Flood CamML</strong></a><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/create-repository">Creating a repository</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/google-services">Google services</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/tutorial/sheets-and-drive">Google Sheets &amp; Drive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/customize-app">Customizing the app</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/deployment">Deployment</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/citing-camml">Citing CamML</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Google Sheets &amp; Drive</h1></header><div class="markdown"><p>CamML uses Google Sheets to record user labelling responses and Google Drive to save the images being labeled.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="create-an-r-file-to-hold-ids"></a>Create an R file to hold IDs<a class="hash-link" href="#create-an-r-file-to-hold-ids" title="Direct link to heading">#</a></h2><p>After we create a spreadsheet and folder, we will copy their IDs into an R file that will be loaded by the app as environment variables.</p><p>We will create the R file now so we can copy the IDs in when ready.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="to-create-the-r-file"></a>To create the R file:<a class="hash-link" href="#to-create-the-r-file" title="Direct link to heading">#</a></h4><ol><li>Open RStudio</li><li>Click <strong>File &gt; Open Project</strong>, navigate to the GitHub repo folder, and open the R project file (.RProj)</li><li>Create a new file (<strong>File &gt; New File</strong>) called <code>google_keys.R</code>, and paste in the following code:</li></ol><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">google_keys.R</div><div class="codeBlockContent_hGly r"><div tabindex="0" class="prism-code language-r codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Sys.setenv(&quot;GOOGLE_SHEET_ID&quot; = &quot;your_sheets_id&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Sys.setenv(&quot;GOOGLE_FOLDER_ID&quot; = &quot;your_folder_id&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="4"><li>Save the file, and keep it open so we can paste in the IDs when ready!</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="create-a-spreadsheet"></a>Create a spreadsheet<a class="hash-link" href="#create-a-spreadsheet" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="to-create-the-spreadsheet"></a>To create the spreadsheet<a class="hash-link" href="#to-create-the-spreadsheet" title="Direct link to heading">#</a></h4><ol><li><p>Navigate to Google Drive while signed into your Google Account. Click the <strong>New</strong> button in the top left, and select <strong>Google Sheets</strong>. Name the spreadsheet something meaningful, such as <strong>Flood CamML responses</strong>. </p></li><li><p>The CamML app writes a few columns worth of data, and it is important to have the columns names and order of column names exact. Create column names following example convention below:</p></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="example-of-spreadsheet-columns"></a>Example of spreadsheet columns<a class="hash-link" href="#example-of-spreadsheet-columns" title="Direct link to heading">#</a></h4><table><thead><tr><th>date</th><th>location</th><th>filename</th><th>model_score</th><th>model_class</th><th>user_response</th></tr></thead><tbody><tr><td>2021-07-28 13:11:24</td><td>Mirlo</td><td>Mirlo_2021-07-28 13:11:23.jpg</td><td>0.01</td><td>No Flooding</td><td>No Flood</td></tr></tbody></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Datetime format</h5></div><div class="admonition-content"><p>Datetimes are reported in UTC in the spreadsheet, but by default are displayed as EST/EDT in the CamML App.</p></div></div><ol start="3"><li><p>Click the <code>Share</code> button in the top-right, and paste the service account email into the text box to share the spreadsheet with the service account. Accept the default properties (Editor), and click <strong>Done</strong>.</p></li><li><p>We need to copy the ID of the spreadsheet into <code>google_keys.R</code> so the app knows what spreadsheet to write to. The easiest way to do this is to copy the ID from the URL for the spreadsheet. The ID will be an extremely long string of characters and symbols between two forward slashes.</p></li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Example ID</h5></div><div class="admonition-content"><p>From the URL <code>https://docs.google.com/spreadsheets/d/very-long_string_ofRandom.characters-isTheKey!/edit#gid=0</code>, the ID would be <code>very-long_string_ofRandom.characters-isTheKey!</code></p></div></div><p>Your <code>google_keys.R</code> file should now look like below (except with your actual ID, of course!)</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">google_keys.R</div><div class="codeBlockContent_hGly r"><div tabindex="0" class="prism-code language-r codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Sys.setenv(&quot;GOOGLE_SHEET_ID&quot; = &quot;very-long_string_ofRandom.characters-isTheKey!&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Sys.setenv(&quot;GOOGLE_FOLDER_ID&quot; = &quot;your_folder_id&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="creating-a-folder"></a>Creating a folder<a class="hash-link" href="#creating-a-folder" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="to-create-a-google-drive-folder"></a>To create a Google Drive folder:<a class="hash-link" href="#to-create-a-google-drive-folder" title="Direct link to heading">#</a></h4><ol><li><p>At the Drive homepage, click the <strong>New</strong> button in the top left, and select <strong>Folder</strong>. Name the folder something meaningful, such as <strong>Flood CamML Images</strong>. </p></li><li><p>Click the <code>Share</code> button in the top-right, and paste the service account email into the text box to share the folder with the service account. Accept the default properties (Editor), and click <strong>Done</strong>.</p></li><li><p>Double click on your new folder, and copy the folder ID from the URL just like you did for the spreadsheet. The folder ID is likely located at the end of the URL rather than between forward slashes.</p></li><li><p>Copy the folder ID into <code>google_keys.R</code>:</p></li></ol><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">google_keys.R</div><div class="codeBlockContent_hGly r"><div tabindex="0" class="prism-code language-r codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Sys.setenv(&quot;GOOGLE_SHEET_ID&quot; = &quot;very-long_string_ofRandom.characters-isTheKey!&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Sys.setenv(&quot;GOOGLE_FOLDER_ID&quot; = &quot;folder-key_is.also_aVery-long_string&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now that we have all Google components set up, we&#x27;re ready to customize the app!</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/FloodCamML/docs/tutorial/sheets-and-drive.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorial/google-services"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Google services</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tutorial/customize-app"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Customizing the app Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-an-r-file-to-hold-ids" class="table-of-contents__link">Create an R file to hold IDs</a></li><li><a href="#create-a-spreadsheet" class="table-of-contents__link">Create a spreadsheet</a></li><li><a href="#creating-a-folder" class="table-of-contents__link">Creating a folder</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/FloodCamML" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Flood CamML. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fa62558d.js"></script>
<script src="/assets/js/main.c686b041.js"></script>
</body>
</html>