(self.webpackChunkfloodcamml=self.webpackChunkfloodcamml||[]).push([[448],{3730:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return i},metadata:function(){return s},toc:function(){return d},default:function(){return h}});var o=a(2122),n=a(9756),r=(a(7294),a(3905)),l=["components"],i={sidebar_position:4},s={unversionedId:"tutorial/sheets-and-drive",id:"tutorial/sheets-and-drive",isDocsHomePage:!1,title:"Google Sheets & Drive",description:"CamML uses Google Sheets to record user labelling responses and Google Drive to save the images being labeled.",source:"@site/docs/tutorial/sheets-and-drive.md",sourceDirName:"tutorial",slug:"/tutorial/sheets-and-drive",permalink:"/docs/tutorial/sheets-and-drive",editUrl:"https://github.com/FloodCamML/docs/tutorial/sheets-and-drive.md",version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Google services",permalink:"/docs/tutorial/google-services"},next:{title:"Customizing the app",permalink:"/docs/tutorial/customize-app"}},d=[{value:"Create an R file to hold IDs",id:"create-an-r-file-to-hold-ids",children:[]},{value:"Create a spreadsheet",id:"create-a-spreadsheet",children:[]},{value:"Creating a folder",id:"creating-a-folder",children:[]}],p={toc:d};function h(e){var t=e.components,a=(0,n.Z)(e,l);return(0,r.kt)("wrapper",(0,o.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"CamML uses Google Sheets to record user labelling responses and Google Drive to save the images being labeled."),(0,r.kt)("h2",{id:"create-an-r-file-to-hold-ids"},"Create an R file to hold IDs"),(0,r.kt)("p",null,"After we create a spreadsheet and folder, we will copy their IDs into an R file that will be loaded by the app as environment variables."),(0,r.kt)("p",null,"We will create the R file now so we can copy the IDs in when ready."),(0,r.kt)("h4",{id:"to-create-the-r-file"},"To create the R file:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open RStudio"),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"File > Open Project"),", navigate to the GitHub repo folder, and open the R project file (.RProj)"),(0,r.kt)("li",{parentName:"ol"},"Create a new file (",(0,r.kt)("strong",{parentName:"li"},"File > New File"),") called ",(0,r.kt)("inlineCode",{parentName:"li"},"google_keys.R"),", and paste in the following code:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-r",metastring:'title="google_keys.R"',title:'"google_keys.R"'},'Sys.setenv("GOOGLE_SHEET_ID" = "your_sheets_id")\nSys.setenv("GOOGLE_FOLDER_ID" = "your_folder_id")\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Save the file, and keep it open so we can paste in the IDs when ready!")),(0,r.kt)("h2",{id:"create-a-spreadsheet"},"Create a spreadsheet"),(0,r.kt)("h4",{id:"to-create-the-spreadsheet"},"To create the spreadsheet"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Navigate to Google Drive while signed into your Google Account. Click the ",(0,r.kt)("strong",{parentName:"p"},"New")," button in the top left, and select ",(0,r.kt)("strong",{parentName:"p"},"Google Sheets"),". Name the spreadsheet something meaningful, such as ",(0,r.kt)("strong",{parentName:"p"},"Flood CamML responses"),". ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The CamML app writes a few columns worth of data, and it is important to have the columns names and order of column names exact. Create column names following example convention below:"))),(0,r.kt)("h4",{id:"example-of-spreadsheet-columns"},"Example of spreadsheet columns"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"date"),(0,r.kt)("th",{parentName:"tr",align:null},"location"),(0,r.kt)("th",{parentName:"tr",align:null},"filename"),(0,r.kt)("th",{parentName:"tr",align:null},"model_score"),(0,r.kt)("th",{parentName:"tr",align:null},"model_class"),(0,r.kt)("th",{parentName:"tr",align:null},"user_response"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2021-07-28 13:11:24"),(0,r.kt)("td",{parentName:"tr",align:null},"Mirlo"),(0,r.kt)("td",{parentName:"tr",align:null},"Mirlo_2021-07-28 13:11:23.jpg"),(0,r.kt)("td",{parentName:"tr",align:null},"0.01"),(0,r.kt)("td",{parentName:"tr",align:null},"No Flooding"),(0,r.kt)("td",{parentName:"tr",align:null},"No Flood")))),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Datetime format")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Datetimes are reported in UTC in the spreadsheet, but by default are displayed as EST/EDT in the CamML App."))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click the ",(0,r.kt)("inlineCode",{parentName:"p"},"Share")," button in the top-right, and paste the service account email into the text box to share the spreadsheet with the service account. Accept the default properties (Editor), and click ",(0,r.kt)("strong",{parentName:"p"},"Done"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"We need to copy the ID of the spreadsheet into ",(0,r.kt)("inlineCode",{parentName:"p"},"google_keys.R")," so the app knows what spreadsheet to write to. The easiest way to do this is to copy the ID from the URL for the spreadsheet. The ID will be an extremely long string of characters and symbols between two forward slashes."))),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Example ID")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"From the URL ",(0,r.kt)("inlineCode",{parentName:"p"},"https://docs.google.com/spreadsheets/d/very-long_string_ofRandom.characters-isTheKey!/edit#gid=0"),", the ID would be ",(0,r.kt)("inlineCode",{parentName:"p"},"very-long_string_ofRandom.characters-isTheKey!")))),(0,r.kt)("p",null,"Your ",(0,r.kt)("inlineCode",{parentName:"p"},"google_keys.R")," file should now look like below (except with your actual ID, of course!)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-r",metastring:'title="google_keys.R"',title:'"google_keys.R"'},'Sys.setenv("GOOGLE_SHEET_ID" = "very-long_string_ofRandom.characters-isTheKey!")\nSys.setenv("GOOGLE_FOLDER_ID" = "your_folder_id")\n')),(0,r.kt)("h2",{id:"creating-a-folder"},"Creating a folder"),(0,r.kt)("h4",{id:"to-create-a-google-drive-folder"},"To create a Google Drive folder:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"At the Drive homepage, click the ",(0,r.kt)("strong",{parentName:"p"},"New")," button in the top left, and select ",(0,r.kt)("strong",{parentName:"p"},"Folder"),". Name the folder something meaningful, such as ",(0,r.kt)("strong",{parentName:"p"},"Flood CamML Images"),". ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click the ",(0,r.kt)("inlineCode",{parentName:"p"},"Share")," button in the top-right, and paste the service account email into the text box to share the folder with the service account. Accept the default properties (Editor), and click ",(0,r.kt)("strong",{parentName:"p"},"Done"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Double click on your new folder, and copy the folder ID from the URL just like you did for the spreadsheet. The folder ID is likely located at the end of the URL rather than between forward slashes.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Copy the folder ID into ",(0,r.kt)("inlineCode",{parentName:"p"},"google_keys.R"),":"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-r",metastring:'title="google_keys.R"',title:'"google_keys.R"'},'Sys.setenv("GOOGLE_SHEET_ID" = "very-long_string_ofRandom.characters-isTheKey!")\nSys.setenv("GOOGLE_FOLDER_ID" = "folder-key_is.also_aVery-long_string")\n')),(0,r.kt)("p",null,"Now that we have all Google components set up, we're ready to customize the app!"))}h.isMDXComponent=!0}}]);